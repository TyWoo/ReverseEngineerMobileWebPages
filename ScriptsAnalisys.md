# Script List

The web [site](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues.htm#n), I think is just an .htm, taken from [here](https://happiez-traveli.com/aunt-sues-nephew#), this one includes scripts, (wordpress, facebook, to programming, woocommerce), to test the possible candidates. I mark the ones unused, to know which ones the page isn't used and shall be removed for better performance.

## Main Scripts

1. [recaptcha__en.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/recaptcha__en.js)  **(unused)**:
Recapcha plugin.

2. [527792464332633](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/527792464332633):
I have no idea

3. [fbevents.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/fbevents.js):
Manage facebook events on the current page (comments for example)

4. [wp-emoji-release.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/wp-emoji-release.min.js):
Part of wordpress plugin to show emojis on the page

5. [jquery.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/jquery.js):
jquery library to manage easily javascript code.  v1.12.4

6. [jquery-migrate.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/jquery-migrate.min.js):
Restores the APIs that were removed, and additionally shows warnings in the browser console (development version of jQuery Migrate only) when removed and/or deprecated APIs are used.

7. [core.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/core.min.js):
jQuery user interface code (like animations or transitions, etc)

8. [datepicker.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/datepicker.min.js) **(unused)**:
Manage a datepicker

9. [underscore.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/underscore.min.js) **(unused)**:
JavaScript library which provides utility functions for common programming tasks.

10. [form.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/form.min.js):
Used to allow the form used ajax. (used with facebook comments)

11. [photon.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/photon.min.js) **(unused)**:
Load a images when they have the custom attribute data-recalc-dims

12. [api.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/api.js) **(unused)**:
Function to render recapcha

13. [devicepx-jetpack.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/devicepx-jetpack.js):
Part of wordpress plugin to show avatars on screen of big resolution

14. [backbone.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/backbone.min.js):
Give your JS App some Backbone with Models, Views, Collections and key-values

15. [wp-api.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/wp-api.js):
Uses backbone to formats dates, show media, on wordpress posts

16. [bootstrap.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/bootstrap.min.js):
Library to use javascript to built responsive design web sites.

17. [jquery.mb.YTPlayer.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/jquery.mb.YTPlayer.min.js) **(unused)**:
Use a custom youtube player for a video as background on jQuery framework

18. [jqBootstrapValidation.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/jqBootstrapValidation.js):
To validate forms (need bootstrap.min.js)

19. [jquery.flexslider-min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/jquery.flexslider-min.js):
To have a responsive slider on the page

20. [jquery.magnific-popup.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/jquery.magnific-popup.min.js) **(unused)**:
To have a responsive popup to show images

21. [jquery.fitvids.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/jquery.fitvids.js) **(unused)**:
Add videos to the site

22. [smoothscroll.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/smoothscroll.js) **(unused)**:
Plugin to have a smooth scroll

23. [owl.carousel.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/owl.carousel.min.js) **(unused)**:
To have a touch carousel

24. [custom.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/custom.js):
Has custon functions for the page, do some activities if the page is run on an specific device and use others plugins or libraries such as owlCarousel or jquery

25. [navigation.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/navigation.min.js) **(unused)**:
Manage thins as the sizes of centain areas of the page

26. [skip-link-focus-fix.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/skip-link-focus-fix.min.js):
This is used to skip a link only applies for webkit, msie and opera

27. [comment-reply.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/comment-reply.min.js)  **(unused)**::
To leave a comment

28. [wp-embed.min.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/wp-embed.min.js):
embe code on the site

29. [e-201839.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/e-201839.js):
This controls a tracker

30. [wp-emoji-release.min.js?ver=69dd45a6c1792230f53097a3a0fa0f52](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/wp-emoji-release.min.js?ver=69dd45a6c1792230f53097a3a0fa0f52) **(loaded for a 2nd time)**:
Part of wordpress plugin, ver. 69dd45a6c1792230f53097a3a0fa0f52, to show emojis on the page

31. [recaptcha__en.js](https://comtrckhrd.online/landers/upworkscripts/1_over_bs/aunt_sues_files/recaptcha__en.js) **(loaded for a 2nd time)**  **(unused)**:
Recapcha plugin.

32. [renderScript?form=json&_=1538424100687](https://www.tickerassist.co.uk/ProgressiveTickers/WebServiceProgressiveTickerScript.asmx/renderScript?form=json&_=1538424100687)
Loads and initializes some variables.

## Other scripts

1. `<script type="text/javascript">
        jQuery(document).ready(function ($) {$(".progressive15").bind("DOMSubtreeModified",function(){
               $(".jackpot-number").html($(this).html());
            });
        });
    </script>`:
    Updates the jackpot number every second.

2.  `<script>jQuery(function($){
        		$('.fosrm').on('submit', function (event) {
					event.preventDefault();// using this page stop being refreshing
          			$('#fbModal').modal('show');
							$('#fbForm').hide();
							$('#fbConfirm').show();
							$('#fbFail').hide();
        		});
      		});
	</script>`:
	When appears the popup with the buttons "STOP SEEING THIS AD" and "REPORT THIS PAGE" prevent default actions and make custom (show facebook image like)

3.  `<script language="JavaScript" type="text/javascript">jQuery(function(trackvar){ trackvar('.container a').addClass('clickers'); });</script> `: track clicks on the popup "If We Gave You 100 Free Spins, Could You Win?"
4.  `<script type="text/javascript">
	    document.write('<img src="https://secure-redirect.co/path/lp-img.php?trvid=10272&trvx=16f3a3e3&' + window.location.search.substring(1) + '&trvrf=' + encodeURIComponent(document.referrer) + '" style="display:none;" />');
	</script>`: to add a image
5. `<script>
		!function(f,b,e,v,n,t,s){if(f.fbq)return;n=f.fbq=function(){n.callMethod?
		n.callMethod.apply(n,arguments):n.queue.push(arguments)};if(!f._fbq)f._fbq=n;
		n.push=n;n.loaded=!0;n.version='2.0';n.queue=[];t=b.createElement(e);t.async=!0;
		t.src=v;s=b.getElementsByTagName(e)[0];s.parentNode.insertBefore(t,s)}(window,
		document,'script','https://connect.facebook.net/en_US/fbevents.js');
		fbq('init', '527792464332633');   // <<<<< please change only xxxx with your ID, don't touch 'QUOTES'
		fbq('track', 'PageView');
	</script>`: collects information for facebook
6. `<script>
		jQuery(document).ready(function($) {
			$(".clickers").click(function(){
			fbq('track', 'ViewContent');
		      	});
		});
	</script>`:collects information for facebook
7. `<script>var w=new Wisepops(fileString,iDiv,options);w.init();}...();})();</script>`: adds the popup "If We Gave You 100 Free Spins, Could You Win?" to the HTML
8. `<script>function myzFunction() {
	    var x = document.getElementById("wisepop-modal-107993");
	    if (x.style.visibility === "visible") {
	        x.style.visibility = "hidden";
	    } else {
	        x.style.visibility = "hidden";
	    }
	}</script>`: shows or hide the modal "If We Gave You 100 Free Spins, Could You Win?"
9. `<script type="text/javascript">
		window.WisePopsLoaderCallback = function() {
		    var wisepopsLink = document.createElement('a');
		    wisepopsLink.href = '#wisepops';
		    wisepopsLink.id = 'wisepops-back-button';
		    wisepopsLink.style.display = "none";
		    document.body.appendChild(wisepopsLink);
		}
		function addHash() {
		  history.pushState(null, null, '#n');
		  window.addEventListener(
		    'hashchange',
		    function(e) {
		      if (e.newURL.endsWith('#n')) {
		        return;
		      }
		      if (e.oldURL.endsWith('#n')) {
		        var wisepopsLink = document.getElementById('wisepops-back-button');
		var wwwa = document.getElementById("wisepop-modal-107993").style.visibility = "visible";
				var ww2 = document.getElementById("wisepop-107993").style.opacity = "1";
		ww2.click(); wwwa.click();
		      wisepopsLink.click();
		   document.getElementById("wisepop-modal-107993").style.visibility = "visible";
		document.getElementByClassName("wisepop-popin").style.opacity = "1";
		        document.removeEventListener(e.type, arguments.callee);
		      }
		    },
		    false,
		  )
		}
		function initListeners() {
		  // if MutationObserver is supported by the browser
		  if ('MutationObserver' in window) {
		    var observer = new MutationObserver(mutations => {
		      mutations.forEach(mutation => {
		        for (let i = 0; i < mutation.addedNodes.length; i++)
		          if (mutation.addedNodes[i].id === 'wisepop-main-container') {
		            addHash()
		            observer.disconnect()
		          }
		      })
		    })
		    observer.observe(document, { childList: true, subtree: true })
		  } else {
		    document.addEventListener(
		      'DOMNodeInserted',
		      function(e) {
		        if (e.target.id === 'wisepop-main-container') {
		          addHash()
		          document.removeEventListener(e.type, arguments.callee)
		        }
		      },
		      false,
		    )
		  }
		}
		window.onload = function() {
		    if(document.querySelector('#wisepop-main-container')) {
		        addHash();
		    }
		    else {
		var wwwa = document.getElementById("wisepop-modal-107993").style.visibility = "visible";
		var ww2 = document.getElementById("wisepop-107993").style.opacity = "1";
		ww2.click(); wwwa.click();
		        initListeners();
		    }
		}
	</script>`: manages the back button function to show or not shows the popup "If We Gave You 100 Free Spins, Could You Win?", this one manage the url to make this possible.
10. `<script>
		var advanced_ads_ga_UID = false;
		var advanced_ads_ga_anonymIP = true;
		advanced_ads_check_adblocker=function(t){function e(t){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||function(t){return setTimeout(t,16)}).call(window,t)}var n=[],a=null;return e(function(){var t=document.createElement("div");t.innerHTML="&nbsp;",t.setAttribute("class","ad_unit ad-unit text-ad text_ad pub_300x250"),t.setAttribute("style","width: 1px !important; height: 1px !important; position: absolute !important; left: 0px !important; top: 0px !important; overflow: hidden !important;"),document.body.appendChild(t),e(function(){var e=window.getComputedStyle&&window.getComputedStyle(t),o=e&&e.getPropertyValue("-moz-binding");a=e&&"none"===e.getPropertyValue("display")||"string"==typeof o&&-1!==o.indexOf("about:");for(var i=0;i<n.length;i++)n[i](a);n=[]})}),function(t){if(null===a)return void n.push(t);t(a)}}(),function(){var t=function(t,e){this.name=t,this.UID=e,this.analyticsObject=null;var n=this,a={hitType:"event",eventCategory:"Advanced Ads",eventAction:"AdBlock",eventLabel:"Yes",nonInteraction:!0,transport:"beacon"};this.analyticsObject="string"==typeof GoogleAnalyticsObject&&"function"==typeof window[GoogleAnalyticsObject]&&window[GoogleAnalyticsObject],!1===this.analyticsObject?(!function(t,e,n,a,o,i,d){t.GoogleAnalyticsObject=o,t[o]=t[o]||function(){(t[o].q=t[o].q||[]).push(arguments)},t[o].l=1*new Date,i=e.createElement(n),d=e.getElementsByTagName(n)[0],i.async=1,i.src="https://www.google-analytics.com/analytics.js",d.parentNode.insertBefore(i,d)}(window,document,"script",0,"_advads_ga"),_advads_ga("create",n.UID,"auto",this.name),advanced_ads_ga_anonymIP&&_advads_ga("set","anonymizeIp",!0),_advads_ga(n.name+".send",a)):(window.console&&window.console.log("Advanced Ads Analytics >> using other's variable named `"+GoogleAnalyticsObject+"`"),window[GoogleAnalyticsObject]("create",n.UID,"auto",this.name),window[GoogleAnalyticsObject]("set","anonymizeIp",!0),window[GoogleAnalyticsObject](n.name+".send",a))};advanced_ads_check_adblocker(function(e){e&&"string"==typeof advanced_ads_ga_UID&&advanced_ads_ga_UID&&new t("advadsTracker",advanced_ads_ga_UID)})}();
	</script>`: function for the ads in the pages and this one vertify if exist ad blockers
11. `<script type="text/javascript">  var WP_API_Settings = {"root":"https:\/\/happiez-traveli.com\/wp-json\/","nonce":"43bde60c02"};  <div></div></script>`: set the root variable for the wordpress API

# Observations

The following observations are made to improve the page performance.

1. The javascript scripts must be located before the `</body>` tag this improves the page speeed loading.
2. The javascript scripts must have the type `<script type="text/javascript">` tag.
3. To avoid render blocking the javascript must have the [async or defer](https://www.growingwiththeweb.com/2014/02/async-vs-defer-attributes.html) when it's possible.
4. There must be 1 call to `ready` function of jquery this optimize the code and doesn't make to many calls to this function.
5. Put all the `<script type="text/javascript"></script>` in one.
6. The css code must be located on the head tag `<head></head>`.
7. The inline styles must be removed and put on the the head, the inline style generate blocking on the render page.
8. Remove the inline javascript calls such as `onclick="`r fo better performace.